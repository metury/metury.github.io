<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Year 2023 day 23 - Personal page</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Personal page</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="advent-of-code---year-2023-day-23"><a class="header" href="#advent-of-code---year-2023-day-23">Advent of code - Year 2023 Day 23</a></h1>
<p>This is a solution of the <a href="https://adventofcode.com/2023/day/23">day 23</a>. Go back to year <a href="2023.html">2023</a>. Go back to <a href="../adventofcode.html">AOC</a>.</p>
<h3 id="info"><a class="header" href="#info">Info</a></h3>
<h4 id="part-1"><a class="header" href="#part-1">Part 1</a></h4>
<p>First part is pretty simple and fast. We just recursively go through the map and follow the slopes. We are trying every possibility and then find the maximum.</p>
<h4 id="part-2"><a class="header" href="#part-2">Part 2</a></h4>
<p>For the second part they are at least two approaches.</p>
<ol>
<li>Use the same code just ignore the slopes and try every possibilty. As one may see this is not quite the best way to do it. But as it turns out you will wait way less than an hour, so it si doable.</li>
<li>The second more complex way is to actually compress each path and create a simplified graph. Then again try every possibility. it will still take probably some time, but there is less vertices and edges to consider.</li>
</ol>
<p>In my code I just used the brute force, because after a lunch the result was already processed.</p>
<h2 id="mainrs"><a class="header" href="#mainrs">main.rs</a></h2>
<pre><code class="language-rs">use std::collections::HashSet;
use std::fs;

const EMPTY: char = '.';
const NON_EMPTY: char = '#';

type Grid&lt;T&gt; = Vec&lt;Vec&lt;T&gt;&gt;;
type Position = (usize, usize);

fn read_file(filepath: &amp;str) -&gt; Grid&lt;char&gt; {
    let contents = fs::read_to_string(filepath);
    let binding = contents.expect("REASON");
    let lines = binding.split('\n');
    let mut map: Grid&lt;char&gt; = vec![];
    for line in lines {
        let map_line: Vec&lt;char&gt; = line.chars().collect();
        if map_line.len() &gt; 0 {
            map.push(map_line);
        }
    }
    map
}

fn find_start_end(map: &amp;Grid&lt;char&gt;) -&gt; (Position, Position) {
    let mut start: Position = (0, 0);
    let mut end: Position = (0, 0);
    for i in 0..map[0].len() {
        if map[0][i] == EMPTY {
            start = (0, i);
            break;
        }
    }
    for i in 0..map[map.len() - 1].len() {
        if map[map.len() - 1][i] == EMPTY {
            end = (map.len() - 1, i);
            break;
        }
    }
    (start, end)
}

fn add(a: Position, b: (i8, i8)) -&gt; Position {
    (
        (a.0 as i64 + b.0 as i64) as usize,
        (a.1 as i64 + b.1 as i64) as usize,
    )
}

fn step(map: &amp;Grid&lt;char&gt;, position: Position, ignore_slopes: bool) -&gt; Vec&lt;Position&gt; {
    let mut positions: Vec&lt;Position&gt; = vec![];
    const LEN: usize = 4;
    let neighbors: [(i8, i8); LEN] = [(0, -1), (0, 1), (1, 0), (-1, 0)];
    let slopes: [char; LEN] = ['&lt;', '&gt;', 'v', '^'];
    for i in 0..LEN {
        let pos: Position = add(position, neighbors[i]);
        if pos.0 &lt; map.len() &amp;&amp; pos.1 &lt; map[pos.0].len() {
            if ignore_slopes &amp;&amp; map[pos.0][pos.1] != NON_EMPTY {
                positions.push(pos);
            } else if !ignore_slopes
                &amp;&amp; (map[pos.0][pos.1] == EMPTY || map[pos.0][pos.1] == slopes[i])
            {
                positions.push(pos);
            }
        }
    }
    positions
}

fn longest_path(
    map: &amp;Grid&lt;char&gt;,
    visited: &amp;mut HashSet&lt;Position&gt;,
    pos: Position,
    max: &amp;mut u64,
    len: u64,
    end: &amp;Position,
    ignore_slopes: bool,
) {
    if pos == *end {
        if *max &lt; len {
            *max = len;
        }
        return;
    }
    let neighbors = step(map, pos, ignore_slopes);
    for n in neighbors {
        if !visited.contains(&amp;n) {
            visited.insert(n);
            longest_path(map, visited, n, max, len + 1, end, ignore_slopes);
            visited.remove(&amp;n);
        }
    }
}

fn part1() {
    let map = read_file("INPUT");
    let (start, end) = find_start_end(&amp;map);
    let mut set: HashSet&lt;Position&gt; = HashSet::new();
    let mut max: u64 = 0;
    longest_path(&amp;map, &amp;mut set, start, &amp;mut max, 0, &amp;end, false);
    println!("Part 1: {}", max);
}

fn part2() {
    let map = read_file("INPUT");
    let (start, end) = find_start_end(&amp;map);
    let mut set: HashSet&lt;Position&gt; = HashSet::new();
    let mut max: u64 = 0;
    longest_path(&amp;map, &amp;mut set, start, &amp;mut max, 0, &amp;end, true);
    println!("Part 2: {}", max);
}

fn main() {
    println!("Year 2023 day 23 - A Long Walk");
    part1();
    part2();
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../aoc/2023-22.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../aoc/2023-24.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../aoc/2023-22.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../aoc/2023-24.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
